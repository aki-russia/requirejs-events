var mangra;mangra=new function(){var a,b,c;return c=batch(),a=function(a){return this.name=a,this._id=ui_guid_generator(),this._handlers=[],this._last_params=null,this},a.prototype={_handlers_caller:function(a){var b,d,e=this;return a=(a||this._handlers).concat([]),d={name:this.name},b="[object Array]"===toString.call(this._last_params)?this._last_params:[this._last_params],b.push(d),c.use(a).each(function(a,c){var d;return null==(null!=(d=a.event_data)?d[e._id]:void 0)?(e._handlers.splice(c,1),delete a.event_data[e._id]):a.apply(a.event_data[e._id].context,b)})},on:function(a,b,c){return a.event_data=a.event_data||{},a.event_data[this._id]=a.event_data[this._id]||{},a.event_data[this._id].context=b||a.event_data[this._id].context,a.event_data[this._id].options=c||a.event_data[this._id].options,a.id=a.id||ui_guid_generator(),this._handlers.push(a),null!=c&&null!=c.recall&&null!=this._last_params&&this._handlers_caller([a]),this},off:function(a){return a.event_data&&a.event_data[this._id]&&delete a.event_data[this._id],this},fire:function(a){return this._last_params=a,this._handlers_caller()}},b=function(a){return this.name=a,this.list={},this},b.prototype={list:{},init:function(a){var b;return b=this.sprout(),a.fire=function(){return b.fire.apply(b,arguments)},a.once=function(){return b.once.apply(b,arguments)},a.on=function(){return b.on.apply(b,arguments)},a.off=function(){return b.off.apply(b,arguments)},a},sprout:function(a){var c;return this[a]?this[a]instanceof b?this[a]:!1:(c=new b(a),a&&(this[a]=c),c)},create:function(b){return b?null!=this.list[b]?this.list[b]:this.list[b]=new a(b):new a},forget:function(a){return a?(delete this.list[a],this):void 0},once:function(a,b,c,d){var e,f,g=this;return e=this,f=function(){return g.off(a,b),g.off(a,f)},this.on(a,b,c,d),this.on(a,f),f},on:function(a,b,c,d){var e,f,g,h,i=this;for(f=a.split(/\s*,\s*/),g=0,h=f.length;h>g;g++)e=f[g],this.create(e).on(b,c,d);return function(){var a,c,d;for(d=[],a=0,c=f.length;c>a;a++)e=f[a],d.push(i.off(e,b));return d}},off:function(a,b){var c=this;return this.list[a]&&this.list[a].off(b),function(){return c.on(a,b)}},fire:function(a,b){return this.create(a).fire(b)}},new b("mangra")};